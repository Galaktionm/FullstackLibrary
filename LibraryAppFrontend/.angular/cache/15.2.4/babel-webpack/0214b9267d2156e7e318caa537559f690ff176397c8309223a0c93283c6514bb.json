{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { URLGlobal } from 'src/app/URLGlobal';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/forms\";\nexport class AddCheckoutComponent {\n  constructor(httpClient) {\n    this.httpClient = httpClient;\n  }\n  ngOnInit() {\n    this.bookIds = new Set();\n    this.checkoutForm = new FormGroup({\n      user: new FormControl(''),\n      book: new FormControl(''),\n      returnDate: new FormControl('')\n    });\n    this.checkoutForm.get(\"user\")?.valueChanges.subscribe(query => {\n      var params = new HttpParams().set(\"email\", query);\n      this.httpClient.get(URLGlobal.libraryAppURL + \"api/authorization\", {\n        params\n      }).subscribe({\n        next: value => {\n          console.log(value);\n          console.log(value);\n          document.getElementById(\"usersdiv\")?.remove();\n          this.searchedUsers = value;\n          var searchresultdiv = document.createElement(\"div\");\n          searchresultdiv.setAttribute(\"id\", \"searchresults\");\n          searchresultdiv.style.position = \"absolute\";\n          searchresultdiv.style.height = \"500px\";\n          searchresultdiv.style.width = \"500px\";\n          searchresultdiv.style.border = \"solid red\";\n          document.getElementById(\"usersDiv\")?.appendChild(searchresultdiv);\n          for (let i = 0; i < this.searchedUsers.length; i++) {\n            var singleresultDiv = document.createElement(\"button\");\n            singleresultDiv.style.height = \"100px\";\n            singleresultDiv.style.width = \"100px\";\n            singleresultDiv.style.border = \"solid black\";\n            singleresultDiv.setAttribute(\"data-id\", this.searchedUsers[i].userId.toString());\n            singleresultDiv.setAttribute(\"data-email\", this.searchedUsers[i].email);\n            singleresultDiv.innerHTML = this.searchedUsers[i].email;\n            searchresultdiv.appendChild(singleresultDiv);\n            singleresultDiv.addEventListener(\"click\", event => {\n              console.log(\"Clicked!\");\n              this.user = this.searchedUsers[i];\n              this.userId = event.target.dataset[\"id\"];\n            });\n          }\n        }\n      });\n    });\n  }\n}\nAddCheckoutComponent.ɵfac = function AddCheckoutComponent_Factory(t) {\n  return new (t || AddCheckoutComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nAddCheckoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddCheckoutComponent,\n  selectors: [[\"app-add-checkout\"]],\n  decls: 11,\n  vars: 1,\n  consts: [[3, \"formGroup\"], [\"for\", \"user\"], [\"type\", \"text\", \"formControlName\", \"user\", \"id\", \"user\"], [\"for\", \"book\"], [\"type\", \"text\", \"formControlName\", \"book\", \"id\", \"book\"], [\"for\", \"returnDate\"], [\"type\", \"text\", \"formControlName\", \"returnDate\", \"id\", \"returnDate\"]],\n  template: function AddCheckoutComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"form\", 0)(2, \"label\", 1);\n      i0.ɵɵtext(3, \"User: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(4, \"input\", 2);\n      i0.ɵɵelementStart(5, \"label\", 3);\n      i0.ɵɵtext(6, \"Book: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"input\", 4);\n      i0.ɵɵelementStart(8, \"label\", 5);\n      i0.ɵɵtext(9, \"Return date: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"input\", 6);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.checkoutForm);\n    }\n  },\n  dependencies: [i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["HttpParams","FormControl","FormGroup","URLGlobal","AddCheckoutComponent","constructor","httpClient","ngOnInit","bookIds","Set","checkoutForm","user","book","returnDate","get","valueChanges","subscribe","query","params","set","libraryAppURL","next","value","console","log","document","getElementById","remove","searchedUsers","searchresultdiv","createElement","setAttribute","style","position","height","width","border","appendChild","i","length","singleresultDiv","userId","toString","email","innerHTML","addEventListener","event","target","dataset","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["/home/galaktion/Desktop/LibraryAppFrontend/src/app/functionality/add-checkout/add-checkout.component.ts","/home/galaktion/Desktop/LibraryAppFrontend/src/app/functionality/add-checkout/add-checkout.component.html"],"sourcesContent":["import { HttpClient, HttpParams } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { URLGlobal } from 'src/app/URLGlobal';\nimport { BookReview, BookSummary, User } from '../models';\n\n@Component({\n  selector: 'app-add-checkout',\n  templateUrl: './add-checkout.component.html',\n  styleUrls: ['./add-checkout.component.css']\n})\nexport class AddCheckoutComponent implements OnInit {\n\n  searchedUsers!: User[];\n  user!: User\n  userId!: string;\n  books!: Set<BookSummary>;\n  bookIds!: Set<number>\n  checkoutForm!: FormGroup\n\n  constructor(private httpClient: HttpClient) {}\n  \n  ngOnInit(): void {\n    this.bookIds=new Set<number>;\n    this.checkoutForm=new FormGroup({\n      user: new FormControl(''),\n      book: new FormControl(''),\n      returnDate: new FormControl('')\n    });\n\n\n    this.checkoutForm.get(\"user\")?.valueChanges.subscribe(\n      (query)=>{\n        var params=new HttpParams().set(\"email\", query);\n        this.httpClient.get<User[]>(URLGlobal.libraryAppURL+\"api/authorization\", { params }).subscribe({\n          next: (value)=>{\n            console.log(value);\n\n            console.log(value);\n            \n            document.getElementById(\"usersdiv\")?.remove();\n\n            this.searchedUsers=value;\n            var searchresultdiv=document.createElement(\"div\");\n            searchresultdiv.setAttribute(\"id\", \"searchresults\");\n            searchresultdiv.style.position=\"absolute\";\n            searchresultdiv.style.height=\"500px\";\n            searchresultdiv.style.width=\"500px\";\n            searchresultdiv.style.border=\"solid red\";\n            document.getElementById(\"usersDiv\")?.appendChild(searchresultdiv);\n            for(let i=0; i<this.searchedUsers.length; i++){\n              var singleresultDiv=document.createElement(\"button\");\n              singleresultDiv.style.height=\"100px\";\n              singleresultDiv.style.width=\"100px\";\n              singleresultDiv.style.border=\"solid black\";\n              singleresultDiv.setAttribute(\"data-id\", this.searchedUsers[i].userId.toString());\n              singleresultDiv.setAttribute(\"data-email\", this.searchedUsers[i].email);\n              singleresultDiv.innerHTML=this.searchedUsers[i].email;\n              searchresultdiv.appendChild(singleresultDiv);\n              singleresultDiv.addEventListener(\"click\", (event)=>{\n                  console.log(\"Clicked!\");\n                  this.user=this.searchedUsers[i];\n                  this.userId=((<HTMLButtonElement>event.target!).dataset[\"id\"]!);\n              });\n          }}});\n    });\n}\n\n}\n","<div>\n\n<form [formGroup]=\"checkoutForm\">\n\n    <label for=\"user\">User: </label>\n    <input type=\"text\" formControlName=\"user\" id=\"user\">\n\n    <label for=\"book\">Book: </label>\n    <input type=\"text\" formControlName=\"book\" id=\"book\">\n\n    <label for=\"returnDate\">Return date: </label>\n    <input type=\"text\" formControlName=\"returnDate\" id=\"returnDate\">\n\n\n</form>\n</div>\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}