{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { URLGlobal } from 'src/app/URLGlobal';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction DeletebookComponent_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.book);\n  }\n}\nexport class DeletebookComponent {\n  constructor(httpClient) {\n    this.httpClient = httpClient;\n  }\n  ngOnInit() {\n    this.bookSearchForm = new FormGroup({\n      book: new FormControl('')\n    });\n    this.bookSearchForm.get(\"book\")?.valueChanges.subscribe(query => {\n      var params = new HttpParams().set(\"query\", query);\n      this.httpClient.get(URLGlobal.libraryAppURL + \"api/book/search/summary\", {\n        params\n      }).subscribe({\n        next: value => {\n          console.log(value);\n          document.getElementById(\"booksdiv\")?.remove();\n          this.searchedBooks = value;\n          var booksDiv = document.createElement(\"div\");\n          booksDiv.setAttribute(\"id\", \"booksdiv\");\n          document.getElementById(\"deleteFormGrid\")?.appendChild(booksDiv);\n          for (let i = 0; i < this.searchedBooks.length; i++) {\n            var singleresultDiv = document.createElement(\"button\");\n            singleresultDiv.setAttribute(\"data-id\", this.searchedBooks[i].bookId.toString());\n            singleresultDiv.setAttribute(\"data-title\", this.searchedBooks[i].title);\n            singleresultDiv.setAttribute(\"data-author\", this.searchedBooks[i].author[0].name);\n            singleresultDiv.innerHTML = \"Title: \" + this.searchedBooks[i].title + \"<br>\" + \"Author: \" + this.searchedBooks[i].author[0].name;\n            booksDiv.appendChild(singleresultDiv);\n            singleresultDiv.addEventListener(\"click\", event => {\n              console.log(\"Clicked!\");\n              this.bookId = Number.parseInt(event.target.dataset[\"id\"]);\n              this.book = event.target.dataset[\"title\"];\n            });\n          }\n        },\n        error: error => {\n          document.getElementById(\"booksdiv\")?.remove();\n        }\n      });\n    });\n  }\n}\nDeletebookComponent.ɵfac = function DeletebookComponent_Factory(t) {\n  return new (t || DeletebookComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nDeletebookComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DeletebookComponent,\n  selectors: [[\"app-deletebook\"]],\n  decls: 8,\n  vars: 2,\n  consts: [[\"id\", \"deleteFormGrid\"], [3, \"formGroup\"], [1, \"formview\"], [\"for\", \"book\"], [1, \"selectedbooks\"], [4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"book\", \"id\", \"book\"]],\n  template: function DeletebookComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1)(2, \"div\", 2)(3, \"label\", 3);\n      i0.ɵɵtext(4, \"Book: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 4);\n      i0.ɵɵtemplate(6, DeletebookComponent_button_6_Template, 2, 1, \"button\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"input\", 6);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.bookSearchForm);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.book);\n    }\n  },\n  dependencies: [i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["HttpParams","FormControl","FormGroup","URLGlobal","i0","DeletebookComponent","constructor","httpClient","ngOnInit","bookSearchForm","book","get","valueChanges","subscribe","query","params","set","libraryAppURL","next","value","console","log","document","getElementById","remove","searchedBooks","booksDiv","createElement","setAttribute","appendChild","i","length","singleresultDiv","bookId","toString","title","author","name","innerHTML","addEventListener","event","Number","parseInt","target","dataset","error","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/galaktion/Desktop/LibraryAppFrontend/src/app/functionality/deletebook/deletebook.component.ts","/home/galaktion/Desktop/LibraryAppFrontend/src/app/functionality/deletebook/deletebook.component.html"],"sourcesContent":["import { HttpClient, HttpParams } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { URLGlobal } from 'src/app/URLGlobal';\nimport { BookSummary } from '../models';\n\n@Component({\n  selector: 'app-deletebook',\n  templateUrl: './deletebook.component.html',\n  styleUrls: ['./deletebook.component.css']\n})\nexport class DeletebookComponent implements OnInit {\n\n  bookSearchForm!: FormGroup\n  searchedBooks!: BookSummary[];\n  bookId!: number\n  book!: string\n\n  constructor(private httpClient: HttpClient) {}\n\n  ngOnInit(): void {\n    this.bookSearchForm=new FormGroup({\n      book: new FormControl('')\n    });\n\n    this.bookSearchForm.get(\"book\")?.valueChanges.subscribe(\n      (query)=>{\n        var params=new HttpParams().set(\"query\", query);\n        this.httpClient.get<BookSummary[]>(URLGlobal.libraryAppURL+\"api/book/search/summary\", { params }).subscribe({\n          next: (value)=>{\n            console.log(value);\n            \n            document.getElementById(\"booksdiv\")?.remove();\n\n            this.searchedBooks=value;\n            var booksDiv=document.createElement(\"div\");\n            booksDiv.setAttribute(\"id\", \"booksdiv\");\n            document.getElementById(\"deleteFormGrid\")?.appendChild(booksDiv);\n           \n            for(let i=0; i<this.searchedBooks.length; i++){\n              var singleresultDiv=document.createElement(\"button\");\n              singleresultDiv.setAttribute(\"data-id\", this.searchedBooks[i].bookId.toString());\n              singleresultDiv.setAttribute(\"data-title\", this.searchedBooks[i].title);\n              singleresultDiv.setAttribute(\"data-author\", this.searchedBooks[i].author[0].name);\n              singleresultDiv.innerHTML=\"Title: \"+this.searchedBooks[i].title+\"<br>\"+\"Author: \"+this.searchedBooks[i].author[0].name;\n              booksDiv.appendChild(singleresultDiv);\n              singleresultDiv.addEventListener(\"click\", (event)=>{\n                  console.log(\"Clicked!\");\n                  this.bookId=(Number.parseInt(((<HTMLButtonElement>event.target!).dataset[\"id\"]!)));\n                  this.book=((<HTMLButtonElement>event.target!).dataset[\"title\"]!);\n                  \n                });\n          }},\n          error: (error)=>{\n            document.getElementById(\"booksdiv\")?.remove();\n          }\n\n        });\n    });\n  }\n\n}\n","<div id=\"deleteFormGrid\">\n\n<form [formGroup]=\"bookSearchForm\">\n\n    <div class=\"formview\">\n        <label for=\"book\">Book: </label>\n        <div class=\"selectedbooks\">\n          <button *ngIf=\"book\">{{book}}</button>\n        </div>\n        <input type=\"text\" formControlName=\"book\" id=\"book\">\n    </div>\n</form>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}