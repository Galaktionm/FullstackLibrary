{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { URLGlobal } from 'src/app/URLGlobal';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction AddCheckoutComponent_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.user.email);\n  }\n}\nfunction AddCheckoutComponent_button_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const book_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(book_r2);\n  }\n}\nexport class AddCheckoutComponent {\n  constructor(httpClient) {\n    this.httpClient = httpClient;\n  }\n  ngOnInit() {\n    this.bookIds = new Set();\n    this.books = new Set();\n    this.checkoutForm = new FormGroup({\n      user: new FormControl(''),\n      book: new FormControl(''),\n      returnDate: new FormControl('')\n    });\n    this.checkoutForm.get(\"user\")?.valueChanges.subscribe(query => {\n      var params = new HttpParams().set(\"email\", query);\n      this.httpClient.get(URLGlobal.libraryAppURL + \"api/authorization\", {\n        params\n      }).subscribe({\n        next: value => {\n          console.log(value);\n          console.log(value);\n          document.getElementById(\"usersdiv\")?.remove();\n          document.getElementById(\"booksdiv\")?.remove();\n          this.searchedUsers = value;\n          var usersDiv = document.createElement(\"div\");\n          usersDiv.setAttribute(\"id\", \"usersdiv\");\n          document.getElementById(\"checkoutformgrid\")?.appendChild(usersDiv);\n          for (let i = 0; i < this.searchedUsers.length; i++) {\n            var singleresultDiv = document.createElement(\"button\");\n            singleresultDiv.setAttribute(\"data-id\", this.searchedUsers[i].userId.toString());\n            singleresultDiv.setAttribute(\"data-email\", this.searchedUsers[i].email);\n            singleresultDiv.innerHTML = this.searchedUsers[i].email;\n            usersDiv.appendChild(singleresultDiv);\n            singleresultDiv.addEventListener(\"click\", event => {\n              this.user = this.searchedUsers[i];\n              this.userId = event.target.dataset[\"id\"];\n            });\n          }\n        },\n        error: error => {\n          document.getElementById(\"usersdiv\")?.remove();\n          document.getElementById(\"booksdiv\")?.remove();\n        }\n      });\n    });\n    this.checkoutForm.get(\"book\")?.valueChanges.subscribe(query => {\n      var params = new HttpParams().set(\"query\", query);\n      this.httpClient.get(URLGlobal.libraryAppURL + \"api/book/search/summary\", {\n        params\n      }).subscribe({\n        next: value => {\n          console.log(value);\n          document.getElementById(\"usersdiv\")?.remove();\n          document.getElementById(\"booksdiv\")?.remove();\n          this.searchedBooks = value;\n          var booksDiv = document.createElement(\"div\");\n          booksDiv.setAttribute(\"id\", \"booksdiv\");\n          document.getElementById(\"checkoutformgrid\")?.appendChild(booksDiv);\n          for (let i = 0; i < this.searchedBooks.length; i++) {\n            var singleresultDiv = document.createElement(\"button\");\n            singleresultDiv.setAttribute(\"data-id\", this.searchedBooks[i].bookId.toString());\n            singleresultDiv.setAttribute(\"data-title\", this.searchedBooks[i].title);\n            singleresultDiv.setAttribute(\"data-author\", this.searchedBooks[i].author[0].name);\n            singleresultDiv.innerHTML = \"Title: \" + this.searchedBooks[i].title + \"<br>\" + \"Author: \" + this.searchedBooks[i].author[0].name;\n            booksDiv.appendChild(singleresultDiv);\n            singleresultDiv.addEventListener(\"click\", event => {\n              console.log(\"Clicked!\");\n              this.bookIds.add(Number.parseInt(event.target.dataset[\"id\"]));\n              this.books.add(event.target.dataset[\"title\"]);\n            });\n          }\n        },\n        error: error => {\n          document.getElementById(\"usersdiv\")?.remove();\n          document.getElementById(\"booksdiv\")?.remove();\n        }\n      });\n    });\n  }\n}\nAddCheckoutComponent.ɵfac = function AddCheckoutComponent_Factory(t) {\n  return new (t || AddCheckoutComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nAddCheckoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddCheckoutComponent,\n  selectors: [[\"app-add-checkout\"]],\n  decls: 20,\n  vars: 3,\n  consts: [[\"id\", \"checkoutformgrid\", 1, \"checkoutformgrid\"], [1, \"checkoutform\", 3, \"formGroup\"], [1, \"formview\"], [\"for\", \"user\"], [\"class\", \"selecteduser\", 4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"user\", \"id\", \"user\"], [\"for\", \"book\"], [1, \"selectedbooks\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"formControlName\", \"book\", \"id\", \"book\"], [\"for\", \"returnDate\"], [\"type\", \"text\", \"formControlName\", \"returnDate\", \"id\", \"returnDate\"], [\"type\", \"submit\"], [1, \"selecteduser\"]],\n  template: function AddCheckoutComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1)(2, \"div\", 2)(3, \"label\", 3);\n      i0.ɵɵtext(4, \"User: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, AddCheckoutComponent_button_5_Template, 2, 1, \"button\", 4);\n      i0.ɵɵelement(6, \"input\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 2)(8, \"label\", 6);\n      i0.ɵɵtext(9, \"Book: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 7);\n      i0.ɵɵtemplate(11, AddCheckoutComponent_button_11_Template, 2, 1, \"button\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 2)(14, \"label\", 10);\n      i0.ɵɵtext(15, \"Return date: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 2)(18, \"button\", 12);\n      i0.ɵɵtext(19, \"Submit\");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.checkoutForm);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.user);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.books);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n  styles: [\"\\n.checkoutformgrid {\\n    display: grid;\\n    grid-template-columns: 1fr 1fr;\\n}\\n\\n.checkoutform {\\n    margin: 0.2em;\\n    display: flex;\\n    flex-direction: column;\\n}\\n\\n.formview {\\n    margin: 1em;\\n}\\n\\n.formview > label, input {\\n    display: block;\\n    font-size: 2.5em;\\n}\\n\\n#usersdiv {\\n    display: flex;\\n    flex-direction: column;\\n    border: solid;\\n    border-color: rgb(110, 20, 220);;\\n}\\n\\n#usersdiv > button {\\n    display: block;\\n    max-height: 3em;\\n    flex: 1;\\n    border: none;\\n    outline: none;\\n    background-color: rgb(110, 20, 220);\\n    color: white;\\n    font-weight: 800;\\n    font-size: 2em;\\n    margin: 0.5em;\\n}\\n\\n.selectedUser {\\n    display: block;\\n    border: none !important;\\n    border-radius: 0.5em;\\n    background-color: rgb(110, 20, 220);\\n    color: white;\\n    font-size: 1.2em;\\n    padding: 0.3em;\\n}\\n\\n\\n#booksdiv {\\n    display: flex;\\n    flex-direction: column;\\n    border: solid;\\n    border-color: rgb(233, 80, 10);;\\n}\\n\\n#booksdiv > button {\\n    display: block;\\n    max-height: 3em;\\n    flex: 1;\\n    border: none;\\n    outline: none;\\n    background-color: rgb(233, 80, 10);;\\n    color: white;\\n    font-weight: 800;\\n    font-size: 2em;\\n    margin: 0.5em;\\n}\\n\\n.selectedbooks {\\n    display: flex;\\n    flex-direction: row;\\n    margin: 0.3em;\\n}\\n\\n.selectedbooks > button {\\n    border: none !important;\\n    border-radius: 0.5em;\\n    background-color: rgb(233, 80, 10);;\\n    color: white;\\n    font-size: 1.2em;\\n    padding: 0.3em;\\n}\\n\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZnVuY3Rpb25hbGl0eS9hZGQtY2hlY2tvdXQvYWRkLWNoZWNrb3V0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0lBQ0ksYUFBYTtJQUNiLDhCQUE4QjtBQUNsQzs7QUFFQTtJQUNJLGFBQWE7SUFDYixhQUFhO0lBQ2Isc0JBQXNCO0FBQzFCOztBQUVBO0lBQ0ksV0FBVztBQUNmOztBQUVBO0lBQ0ksY0FBYztJQUNkLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsYUFBYTtJQUNiLCtCQUErQjtBQUNuQzs7QUFFQTtJQUNJLGNBQWM7SUFDZCxlQUFlO0lBQ2YsT0FBTztJQUNQLFlBQVk7SUFDWixhQUFhO0lBQ2IsbUNBQW1DO0lBQ25DLFlBQVk7SUFDWixnQkFBZ0I7SUFDaEIsY0FBYztJQUNkLGFBQWE7QUFDakI7O0FBRUE7SUFDSSxjQUFjO0lBQ2QsdUJBQXVCO0lBQ3ZCLG9CQUFvQjtJQUNwQixtQ0FBbUM7SUFDbkMsWUFBWTtJQUNaLGdCQUFnQjtJQUNoQixjQUFjO0FBQ2xCOzs7QUFHQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsYUFBYTtJQUNiLDhCQUE4QjtBQUNsQzs7QUFFQTtJQUNJLGNBQWM7SUFDZCxlQUFlO0lBQ2YsT0FBTztJQUNQLFlBQVk7SUFDWixhQUFhO0lBQ2Isa0NBQWtDO0lBQ2xDLFlBQVk7SUFDWixnQkFBZ0I7SUFDaEIsY0FBYztJQUNkLGFBQWE7QUFDakI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsbUJBQW1CO0lBQ25CLGFBQWE7QUFDakI7O0FBRUE7SUFDSSx1QkFBdUI7SUFDdkIsb0JBQW9CO0lBQ3BCLGtDQUFrQztJQUNsQyxZQUFZO0lBQ1osZ0JBQWdCO0lBQ2hCLGNBQWM7QUFDbEIiLCJzb3VyY2VzQ29udGVudCI6WyJcbi5jaGVja291dGZvcm1ncmlkIHtcbiAgICBkaXNwbGF5OiBncmlkO1xuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbn1cblxuLmNoZWNrb3V0Zm9ybSB7XG4gICAgbWFyZ2luOiAwLjJlbTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG59XG5cbi5mb3JtdmlldyB7XG4gICAgbWFyZ2luOiAxZW07XG59XG5cbi5mb3JtdmlldyA+IGxhYmVsLCBpbnB1dCB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgZm9udC1zaXplOiAyLjVlbTtcbn1cblxuI3VzZXJzZGl2IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgYm9yZGVyOiBzb2xpZDtcbiAgICBib3JkZXItY29sb3I6IHJnYigxMTAsIDIwLCAyMjApOztcbn1cblxuI3VzZXJzZGl2ID4gYnV0dG9uIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBtYXgtaGVpZ2h0OiAzZW07XG4gICAgZmxleDogMTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTEwLCAyMCwgMjIwKTtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgZm9udC13ZWlnaHQ6IDgwMDtcbiAgICBmb250LXNpemU6IDJlbTtcbiAgICBtYXJnaW46IDAuNWVtO1xufVxuXG4uc2VsZWN0ZWRVc2VyIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDtcbiAgICBib3JkZXItcmFkaXVzOiAwLjVlbTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTEwLCAyMCwgMjIwKTtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgZm9udC1zaXplOiAxLjJlbTtcbiAgICBwYWRkaW5nOiAwLjNlbTtcbn1cblxuXG4jYm9va3NkaXYge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBib3JkZXI6IHNvbGlkO1xuICAgIGJvcmRlci1jb2xvcjogcmdiKDIzMywgODAsIDEwKTs7XG59XG5cbiNib29rc2RpdiA+IGJ1dHRvbiB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgbWF4LWhlaWdodDogM2VtO1xuICAgIGZsZXg6IDE7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIG91dGxpbmU6IG5vbmU7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIzMywgODAsIDEwKTs7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGZvbnQtd2VpZ2h0OiA4MDA7XG4gICAgZm9udC1zaXplOiAyZW07XG4gICAgbWFyZ2luOiAwLjVlbTtcbn1cblxuLnNlbGVjdGVkYm9va3Mge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICBtYXJnaW46IDAuM2VtO1xufVxuXG4uc2VsZWN0ZWRib29rcyA+IGJ1dHRvbiB7XG4gICAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7XG4gICAgYm9yZGVyLXJhZGl1czogMC41ZW07XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIzMywgODAsIDEwKTs7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGZvbnQtc2l6ZTogMS4yZW07XG4gICAgcGFkZGluZzogMC4zZW07XG59XG5cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["HttpParams","FormControl","FormGroup","URLGlobal","i0","AddCheckoutComponent","constructor","httpClient","ngOnInit","bookIds","Set","books","checkoutForm","user","book","returnDate","get","valueChanges","subscribe","query","params","set","libraryAppURL","next","value","console","log","document","getElementById","remove","searchedUsers","usersDiv","createElement","setAttribute","appendChild","i","length","singleresultDiv","userId","toString","email","innerHTML","addEventListener","event","target","dataset","error","searchedBooks","booksDiv","bookId","title","author","name","add","Number","parseInt","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/galaktion/Desktop/LibraryAppFrontend/src/app/functionality/add-checkout/add-checkout.component.ts","/home/galaktion/Desktop/LibraryAppFrontend/src/app/functionality/add-checkout/add-checkout.component.html"],"sourcesContent":["import { HttpClient, HttpParams } from '@angular/common/http';\nimport { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { URLGlobal } from 'src/app/URLGlobal';\nimport { BookReview, BookSummary, User } from '../models';\n\n@Component({\n  selector: 'app-add-checkout',\n  templateUrl: './add-checkout.component.html',\n  styleUrls: ['./add-checkout.component.css'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class AddCheckoutComponent implements OnInit {\n\n  searchedUsers!: User[];\n  user!: User\n  userId!: string;\n\n\n  searchedBooks!: BookSummary[];\n  bookPageIndex!: number\n  books!: Set<string>;\n  bookIds!: Set<number>\n\n  checkoutForm!: FormGroup\n\n  constructor(private httpClient: HttpClient) {}\n  \n  ngOnInit(): void {\n    this.bookIds=new Set<number>();\n    this.books=new Set<string>();\n    this.checkoutForm=new FormGroup({\n      user: new FormControl(''),\n      book: new FormControl(''),\n      returnDate: new FormControl('')\n    });\n\n\n    this.checkoutForm.get(\"user\")?.valueChanges.subscribe(\n      (query)=>{\n        var params=new HttpParams().set(\"email\", query);\n        this.httpClient.get<User[]>(URLGlobal.libraryAppURL+\"api/authorization\", { params }).subscribe({\n          next: (value)=>{\n            console.log(value);\n\n            console.log(value);\n            \n            document.getElementById(\"usersdiv\")?.remove();\n            document.getElementById(\"booksdiv\")?.remove();\n\n            this.searchedUsers=value;\n            var usersDiv=document.createElement(\"div\");\n            usersDiv.setAttribute(\"id\", \"usersdiv\");\n            document.getElementById(\"checkoutformgrid\")?.appendChild(usersDiv);\n           \n            for(let i=0; i<this.searchedUsers.length; i++){\n              var singleresultDiv=document.createElement(\"button\");\n              singleresultDiv.setAttribute(\"data-id\", this.searchedUsers[i].userId.toString());\n              singleresultDiv.setAttribute(\"data-email\", this.searchedUsers[i].email);\n              singleresultDiv.innerHTML=this.searchedUsers[i].email;\n              usersDiv.appendChild(singleresultDiv);\n              singleresultDiv.addEventListener(\"click\", (event)=>{\n                  this.user=this.searchedUsers[i];\n                  this.userId=((<HTMLButtonElement>event.target!).dataset[\"id\"]!);\n              });\n          }},\n          error: (error)=>{\n            document.getElementById(\"usersdiv\")?.remove();\n            document.getElementById(\"booksdiv\")?.remove();\n          }\n\n        });\n    });\n\n\n    this.checkoutForm.get(\"book\")?.valueChanges.subscribe(\n      (query)=>{\n        var params=new HttpParams().set(\"query\", query);\n        this.httpClient.get<BookSummary[]>(URLGlobal.libraryAppURL+\"api/book/search/summary\", { params }).subscribe({\n          next: (value)=>{\n            console.log(value);\n            \n            document.getElementById(\"usersdiv\")?.remove();\n            document.getElementById(\"booksdiv\")?.remove();\n\n            this.searchedBooks=value;\n            var booksDiv=document.createElement(\"div\");\n            booksDiv.setAttribute(\"id\", \"booksdiv\");\n            document.getElementById(\"checkoutformgrid\")?.appendChild(booksDiv);\n           \n            for(let i=0; i<this.searchedBooks.length; i++){\n              var singleresultDiv=document.createElement(\"button\");\n              singleresultDiv.setAttribute(\"data-id\", this.searchedBooks[i].bookId.toString());\n              singleresultDiv.setAttribute(\"data-title\", this.searchedBooks[i].title);\n              singleresultDiv.setAttribute(\"data-author\", this.searchedBooks[i].author[0].name);\n              singleresultDiv.innerHTML=\"Title: \"+this.searchedBooks[i].title+\"<br>\"+\"Author: \"+this.searchedBooks[i].author[0].name;\n              booksDiv.appendChild(singleresultDiv);\n              singleresultDiv.addEventListener(\"click\", (event)=>{\n                  console.log(\"Clicked!\");\n                  this.bookIds.add(Number.parseInt(((<HTMLButtonElement>event.target!).dataset[\"id\"]!)));\n                  this.books.add((<HTMLButtonElement>event.target!).dataset[\"title\"]!);\n                  \n                });\n          }},\n          error: (error)=>{\n            document.getElementById(\"usersdiv\")?.remove();\n            document.getElementById(\"booksdiv\")?.remove();\n          }\n\n        });\n    });\n}\n\n}\n","<div class=\"checkoutformgrid\" id=\"checkoutformgrid\">\n\n<form [formGroup]=\"checkoutForm\" class=\"checkoutform\">\n\n  <div class=\"formview\">\n    <label for=\"user\">User: </label>\n    <button class=\"selecteduser\" *ngIf=\"user\">{{user.email}}</button>\n    <input type=\"text\" formControlName=\"user\" id=\"user\">\n  </div>\n\n  <div class=\"formview\">\n    <label for=\"book\">Book: </label>\n    <div class=\"selectedbooks\">\n      <button *ngFor=\"let book of books\">{{book}}</button>\n    </div>\n    <input type=\"text\" formControlName=\"book\" id=\"book\">\n  </div>\n\n  <div class=\"formview\">\n    <label for=\"returnDate\">Return date: </label>\n    <input type=\"text\" formControlName=\"returnDate\" id=\"returnDate\">\n  </div>\n\n  <div class=\"formview\">\n    <button type=\"submit\">Submit</button>\n  </div>\n\n</form>\n\n</div>\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}