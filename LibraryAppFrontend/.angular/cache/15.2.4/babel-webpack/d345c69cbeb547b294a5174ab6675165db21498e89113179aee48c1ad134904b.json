{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { URLGlobal } from 'src/app/URLGlobal';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"src/app/authorization/AuthService\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction BookdetailsComponent_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 5);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r0.imagePath, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction BookdetailsComponent_div_11_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const review_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Review: \", review_r2.review, \"\");\n  }\n}\nfunction BookdetailsComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, BookdetailsComponent_div_11_p_5_Template, 2, 1, \"p\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const review_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"User: \", review_r2.user, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Rating: \", review_r2.rating, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", review_r2.review);\n  }\n}\nexport class BookdetailsComponent {\n  constructor(httpClient, authService, activatedRoute) {\n    this.httpClient = httpClient;\n    this.authService = authService;\n    this.activatedRoute = activatedRoute;\n  }\n  ngOnInit() {\n    this.activatedRoute.params.subscribe(params => {\n      this.bookId = params[\"bookId\"];\n      this.httpClient.get(URLGlobal.libraryAppURL + \"api/book/\" + params[\"bookId\"]).subscribe({\n        next: result => {\n          console.log(result);\n          this.imagePath = URLGlobal.libraryAppURL + \"api/operations/image/?imagePath=\" + result.imagePath;\n          this.book = result;\n        },\n        error: error => {\n          console.log(error);\n        }\n      });\n    });\n  }\n  addImage(event) {\n    var fileInputElement = event.target;\n    var image = fileInputElement.files[0];\n    const formData = new FormData();\n    formData.append(\"image\", image);\n    //var extension=image.name.split('.').pop();\n    var params = new HttpParams().append(\"bookId\", this.bookId);\n    this.httpClient.post(URLGlobal.libraryAppURL + \"api/operations/upload\", formData, {\n      params\n    }).subscribe({\n      next: result => {\n        console.log(result);\n      },\n      error: error => {\n        console.log(error);\n      }\n    });\n  }\n}\nBookdetailsComponent.ɵfac = function BookdetailsComponent_Factory(t) {\n  return new (t || BookdetailsComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n};\nBookdetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BookdetailsComponent,\n  selectors: [[\"app-bookdetails\"]],\n  decls: 13,\n  vars: 5,\n  consts: [[1, \"bookdetailsgrid\"], [1, \"visual\"], [3, \"src\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"file\", 3, \"change\"], [3, \"src\"], [4, \"ngIf\"]],\n  template: function BookdetailsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵtemplate(2, BookdetailsComponent_img_2_Template, 1, 1, \"img\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\")(4, \"h3\");\n      i0.ɵɵtext(5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\")(7, \"p\");\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"p\");\n      i0.ɵɵtext(10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(11, BookdetailsComponent_div_11_Template, 6, 3, \"div\", 3);\n      i0.ɵɵelementStart(12, \"input\", 4);\n      i0.ɵɵlistener(\"change\", function BookdetailsComponent_Template_input_change_12_listener($event) {\n        return ctx.addImage($event);\n      });\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.imagePath);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.book.title);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.book.description);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Author: \", ctx.book.author[0].name, \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.book.reviews);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["HttpParams","URLGlobal","i0","BookdetailsComponent","constructor","httpClient","authService","activatedRoute","ngOnInit","params","subscribe","bookId","get","libraryAppURL","next","result","console","log","imagePath","book","error","addImage","event","fileInputElement","target","image","files","formData","FormData","append","post","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/galaktion/Desktop/LibraryAppFrontend/src/app/functionality/bookdetails/bookdetails.component.ts","/home/galaktion/Desktop/LibraryAppFrontend/src/app/functionality/bookdetails/bookdetails.component.html"],"sourcesContent":["import { HttpClient, HttpParams } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Params } from '@angular/router';\nimport { AuthService } from 'src/app/authorization/AuthService';\nimport { URLGlobal } from 'src/app/URLGlobal';\nimport { BookDetails } from '../models';\n\n@Component({\n  selector: 'app-bookdetails',\n  templateUrl: './bookdetails.component.html',\n  styleUrls: ['./bookdetails.component.css']\n})\nexport class BookdetailsComponent implements OnInit {\n  \n  book!: BookDetails\n  bookId!: number\n  isAdmin!: boolean\n  imagePath!: string\n\n  constructor(\n    private httpClient:HttpClient, \n    private authService:AuthService,\n    private activatedRoute: ActivatedRoute) {}\n\n  ngOnInit(): void {\n    this.activatedRoute.params.subscribe((params: Params)=> {\n      this.bookId=params[\"bookId\"];\n      this.httpClient.get<BookDetails>(URLGlobal.libraryAppURL+\"api/book/\"+params[\"bookId\"]).subscribe({\n        next: (result)=>{\n          console.log(result);\n          this.imagePath=URLGlobal.libraryAppURL+\"api/operations/image/?imagePath=\"+result.imagePath;\n          this.book=result;\n        },\n        error: (error)=>{\n          console.log(error);\n        }\n      })});\n  }\n\n  addImage(event: Event){\n\n    var fileInputElement=<HTMLInputElement>event.target!;\n    var image=fileInputElement.files![0];\n\n    const formData=new FormData();\n    formData.append(\"image\", image);\n    \n    //var extension=image.name.split('.').pop();\n    \n    var params=new HttpParams().append(\"bookId\", this.bookId);\n\n    this.httpClient.post(URLGlobal.libraryAppURL+\"api/operations/upload\", formData, { params }).subscribe({\n        next: (result)=>{\n          console.log(result)\n        },\n        error: (error)=>{\n          console.log(error)\n        }\n    })\n\n  }\n\n  \n\n}\n","<div class=\"bookdetailsgrid\">\n\n   <div class=\"visual\">\n      <img *ngIf=\"this.imagePath\" [src]=\"this.imagePath\">\n   </div>\n\n   \n\n   <div>\n      <h3>{{book.title}}</h3>\n      <div>\n        <p>{{book.description}}</p>\n      </div>\n      <p>Author: {{book.author[0].name}}</p>   \n   </div>\n\n    <div *ngFor=\"let review of book.reviews\">\n        <p>User: {{review.user}}</p>\n        <p>Rating: {{review.rating}}</p>\n        <p *ngIf=\"review.review\">Review: {{review.review}}</p>\n\n    </div>\n\n    <input type=\"file\" (change)=\"addImage($event)\">\n\n   </div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}