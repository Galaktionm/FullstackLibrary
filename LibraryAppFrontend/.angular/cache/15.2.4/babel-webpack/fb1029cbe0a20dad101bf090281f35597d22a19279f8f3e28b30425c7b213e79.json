{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { URLGlobal } from 'src/app/URLGlobal';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction AddbookComponent_div_10_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const author_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(author_r2.name);\n  }\n}\nfunction AddbookComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, AddbookComponent_div_10_div_1_Template, 3, 1, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForIn\", ctx_r0.finalAuthors);\n  }\n}\nexport class AddbookComponent {\n  constructor(httpClient) {\n    this.httpClient = httpClient;\n  }\n  ngOnInit() {\n    this.finalAuthors = [];\n    this.resultAuthorIds = new Set();\n    this.addBookForm = new FormGroup({\n      title: new FormControl(''),\n      description: new FormControl(''),\n      authors: new FormControl(''),\n      available: new FormControl('')\n    });\n    var authorsdiv = document.getElementById(\"authorsdiv\");\n    authorsdiv.style.position = \"relative\";\n    var authorsField = document.getElementById(\"authors\");\n    authorsField.style.display = \"block\";\n    this.addBookForm.get(\"authors\")?.valueChanges.subscribe(query => {\n      var params = new HttpParams().set(\"query\", query);\n      this.httpClient.get(URLGlobal.libraryAppURL + \"api/author/search\", {\n        params\n      }).subscribe({\n        next: value => {\n          console.log(value);\n          document.getElementById(\"searchresults\")?.remove();\n          this.currentAuthors = value.data;\n          var searchresultdiv = document.createElement(\"div\");\n          searchresultdiv.setAttribute(\"id\", \"searchresults\");\n          searchresultdiv.style.position = \"absolute\";\n          searchresultdiv.style.height = \"500px\";\n          searchresultdiv.style.width = \"500px\";\n          searchresultdiv.style.border = \"solid red\";\n          authorsdiv?.append(searchresultdiv);\n          for (let i = 0; i < this.currentAuthors.length; i++) {\n            var singleresultDiv = document.createElement(\"button\");\n            singleresultDiv.style.height = \"100px\";\n            singleresultDiv.style.width = \"100px\";\n            singleresultDiv.style.border = \"solid black\";\n            singleresultDiv.setAttribute(\"data-id\", this.currentAuthors[i].authorId.toString());\n            singleresultDiv.setAttribute(\"data-name\", this.currentAuthors[i].name);\n            singleresultDiv.addEventListener(\"click\", event => {\n              this.finalAuthors.push(event.target.dataset[\"id\"]);\n              this.resultAuthorIds.add(Number.parseInt(event.target.dataset[\"id\"]));\n            });\n            singleresultDiv.append(document.createElement(\"p\").innerHTML = this.currentAuthors[i].name);\n            searchresultdiv.append(singleresultDiv);\n          }\n        },\n        error: error => {\n          document.getElementById(\"searchresults\")?.remove();\n        }\n      });\n    });\n  }\n}\nAddbookComponent.ɵfac = function AddbookComponent_Factory(t) {\n  return new (t || AddbookComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nAddbookComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddbookComponent,\n  selectors: [[\"app-addbook\"]],\n  decls: 14,\n  vars: 2,\n  consts: [[3, \"formGroup\"], [\"for\", \"title\"], [\"type\", \"text\", \"formControlName\", \"title\", \"id\", \"title\"], [\"for\", \"description\"], [\"type\", \"text\", \"formControlName\", \"description\", \"id\", \"description\"], [\"id\", \"authorsdiv\"], [\"for\", \"authors\"], [4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"authors\", \"id\", \"authors\"], [\"type\", \"submit\"], [4, \"ngFor\", \"ngForIn\"]],\n  template: function AddbookComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0)(1, \"label\", 1);\n      i0.ɵɵtext(2, \"Title:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(3, \"input\", 2);\n      i0.ɵɵelementStart(4, \"label\", 3);\n      i0.ɵɵtext(5, \"Description:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"textarea\", 4);\n      i0.ɵɵelementStart(7, \"div\", 5)(8, \"label\", 6);\n      i0.ɵɵtext(9, \"Authors:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, AddbookComponent_div_10_Template, 2, 1, \"div\", 7);\n      i0.ɵɵelement(11, \"input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"button\", 9);\n      i0.ɵɵtext(13, \"Add\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.addBookForm);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngIf\", ctx.finalAuthors);\n    }\n  },\n  dependencies: [i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["HttpParams","FormControl","FormGroup","URLGlobal","i0","AddbookComponent","constructor","httpClient","ngOnInit","finalAuthors","resultAuthorIds","Set","addBookForm","title","description","authors","available","authorsdiv","document","getElementById","style","position","authorsField","display","get","valueChanges","subscribe","query","params","set","libraryAppURL","next","value","console","log","remove","currentAuthors","data","searchresultdiv","createElement","setAttribute","height","width","border","append","i","length","singleresultDiv","authorId","toString","name","addEventListener","event","push","target","dataset","add","Number","parseInt","innerHTML","error","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/galaktion/Desktop/LibraryAppFrontend/src/app/functionality/addbook/addbook.component.ts","/home/galaktion/Desktop/LibraryAppFrontend/src/app/functionality/addbook/addbook.component.html"],"sourcesContent":["import { HttpClient, HttpParams } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { URLGlobal } from 'src/app/URLGlobal';\nimport { AuthorApiResult } from '../ApiResult';\nimport { Author } from '../models';\n\n@Component({\n  selector: 'app-addbook',\n  templateUrl: './addbook.component.html',\n  styleUrls: ['./addbook.component.css']\n})\nexport class AddbookComponent implements OnInit {\n\n  addBookForm!: FormGroup\n  currentAuthors!: Author[]\n  finalAuthors!: String[];\n  resultAuthorIds!: Set<number>;\n\n  constructor(private httpClient:HttpClient) {}\n\n\n  ngOnInit(): void {\n    this.finalAuthors=[];\n    this.resultAuthorIds=new Set<number>();\n    this.addBookForm=new FormGroup({\n      title: new FormControl(''),\n      description: new FormControl(''),\n      authors: new FormControl(''),\n      available: new FormControl('')\n    });\n\n    var authorsdiv=document.getElementById(\"authorsdiv\");\n    authorsdiv!.style.position=\"relative\";\n    var authorsField=document.getElementById(\"authors\");\n    authorsField!.style.display=\"block\";\n\n    this.addBookForm.get(\"authors\")?.valueChanges.subscribe(\n      (query)=>{\n        var params=new HttpParams().set(\"query\", query);\n        this.httpClient.get<AuthorApiResult>(URLGlobal.libraryAppURL+\"api/author/search\", { params })\n        .subscribe({\n          next: (value)=>{\n            console.log(value);\n            \n            document.getElementById(\"searchresults\")?.remove();\n\n            this.currentAuthors=value.data;\n            var searchresultdiv=document.createElement(\"div\");\n            searchresultdiv.setAttribute(\"id\", \"searchresults\");\n            searchresultdiv.style.position=\"absolute\";\n            searchresultdiv.style.height=\"500px\";\n            searchresultdiv.style.width=\"500px\";\n            searchresultdiv.style.border=\"solid red\";\n            authorsdiv?.append(searchresultdiv);\n            for(let i=0; i<this.currentAuthors.length; i++){\n              var singleresultDiv=document.createElement(\"button\");\n              singleresultDiv.style.height=\"100px\";\n              singleresultDiv.style.width=\"100px\";\n              singleresultDiv.style.border=\"solid black\";\n              singleresultDiv.setAttribute(\"data-id\", this.currentAuthors[i].authorId.toString());\n              singleresultDiv.setAttribute(\"data-name\", this.currentAuthors[i].name);\n              singleresultDiv.addEventListener(\"click\", (event)=>{\n                this.finalAuthors.push((<HTMLButtonElement>event.target!).dataset[\"id\"]!);\n                this.resultAuthorIds.add(Number.parseInt((<HTMLButtonElement>event.target!).dataset[\"id\"]!));\n              })\n              \n              singleresultDiv.append(document.createElement(\"p\").innerHTML=this.currentAuthors[i].name);\n              searchresultdiv.append(singleresultDiv);\n            }\n          },\n          error: (error)=>{\n            document.getElementById(\"searchresults\")?.remove();\n          }\n      })});\n  }\n}\n\n","<form [formGroup]=\"addBookForm\">\n\n    <label for=\"title\">Title:</label>\n    <input type=\"text\" formControlName=\"title\" id=\"title\"/>\n\n    <label for=\"description\">Description:</label>\n    <textarea type=\"text\" formControlName=\"description\" id=\"description\"></textarea>\n\n    <div id=\"authorsdiv\">\n    <label for=\"authors\">Authors:</label>\n    <div *ngIf=\"finalAuthors\">\n        <div *ngFor=\"let author in finalAuthors\">\n            <button>{{author.name}}</button>\n        </div>\n    </div>\n    <input type=\"text\" formControlName=\"authors\" id=\"authors\">\n    </div>\n\n    <button type=\"submit\">Add</button>\n\n</form>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}